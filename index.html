<!doctype html>
<html>
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Kraken Media Slideshow (Edit mode, no fit option)</title>
<style>
  html,body{height:100%;margin:0}
  body{background:#000;color:#eaeaea;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}

  .stage{position:relative;width:100vw;height:100vh;overflow:hidden;display:flex;align-items:center;justify-content:center;background:var(--bg,#000)}
  .deviceBox{width:100%;height:100%;position:relative}
  .deviceBox.circle{
    -webkit-mask-image:radial-gradient(circle at 50% 50%,#fff 0 calc(50% - var(--pad,0%)),transparent calc(50% - var(--pad,0%)));
            mask-image:radial-gradient(circle at 50% 50%,#fff 0 calc(50% - var(--pad,0%)),transparent calc(50% - var(--pad,0%)));
  }
  .deviceBox.circle::after{content:"";position:absolute;inset:calc(50% - (50% - var(--pad,0%)));border-radius:50%;border:var(--ringW,0px) solid var(--ringC,#222);pointer-events:none}

  .media{position:absolute;inset:0;margin:auto;max-width:100%;max-height:100%;display:none;transform-origin:50% 50%}
  .show{display:block}
  .fade{transition:opacity 300ms ease;opacity:0}
  .fade.show{opacity:1}
  .media{transform:translate(var(--tx,0%),var(--ty,0%)) scale(var(--scale,1)) rotate(var(--rot,0deg))}
</style>
</head>
<body>

<!-- Player -->
<div id="player" class="stage" style="display:none">
  <div id="box" class="deviceBox">
    <img id="imgEl" class="media fade" alt="media">
    <video id="vidEl" class="media fade" muted playsinline preload="auto"></video>
  </div>
</div>

<!-- Configure -->
<div id="config" class="wrap" style="display:none">
  <h1>Kraken Media Slideshow — Configure</h1>

  <div class="card">
    <div class="actions" style="gap:10px;flex-wrap:wrap">
      <button id="add">Add item</button>
      <button id="importTxt" class="secondary">Import from text</button>
      <button id="exportTxt" class="secondary">Export to text</button>
      <label style="display:flex;align-items:center;gap:8px;margin-left:auto">
        <input id="editMode" type="checkbox"> Edit mode (live preview)
      </label>
      <button id="save">Save</button>
      <button id="load" class="secondary">Load</button>
      <button id="clear" class="secondary">Clear</button>
    </div>
  </div>

  <!-- Per-item Inspector -->
  <div class="card" id="inspector" style="display:none">
    <div style="display:flex;justify-content:space-between;align-items:center;gap:12px;margin-bottom:8px">
      <div class="muted" id="insUrl" style="word-break:break-all"></div>
      <div class="actions">
        <button id="applyItem">Apply to item</button>
        <button id="clearItem" class="danger">Clear item overrides</button>
      </div>
    </div>
    <div class="grid cols-2">
      <div>
        <label>Per-image duration (seconds)</label>
        <input id="i_seconds" type="number" min="0" value="0">
      </div>
      <div>
        <label>Video loop</label>
        <select id="i_loop">
          <option value="inherit">inherit</option>
          <option value="true">true</option>
          <option value="false">false</option>
        </select>
      </div>
      <div>
        <label>Video max seconds</label>
        <input id="i_maxSeconds" type="number" min="0" value="0">
      </div>
      <div>
        <label>Override zoom (%)</label>
        <input id="i_scale" type="number" min="10" max="500" value="">
      </div>
      <div>
        <label>Override rotation (deg)</label>
        <input id="i_rotDeg" type="number" min="-180" max="180" value="">
      </div>
      <div>
        <label>Override offset X (%)</label>
        <input id="i_txPct" type="number" min="-100" max="100" value="">
      </div>
      <div>
        <label>Override offset Y (%)</label>
        <input id="i_tyPct" type="number" min="-100" max="100" value="">
      </div>
    </div>
  </div>

  <!-- Global Options -->
  <div class="card grid cols-2">
    <div>
      <label>Image interval (seconds)</label>
      <input id="interval" type="number" min="1" value="30">
    </div>
    <div>
      <label>Cap video length (seconds, 0 = no cap)</label>
      <input id="videoMax" type="number" min="0" value="0">
    </div>
    <div>
      <label>Background</label>
      <input id="bg" type="text" value="#000000">
    </div>
  </div>

  <div class="card">
    <h3>Circular screen</h3>
    <div class="row">
      <div>
        <label>Shape</label>
        <select id="shape">
          <option value="circle">circle</option>
          <option value="square">square</option>
        </select>
      </div>
      <div>
        <label>Circle padding (%)</label>
        <input id="pad" type="range" min="0" max="20" value="4">
        <span id="padVal">4</span>%
      </div>
    </div>
  </div>

  <div class="card">
    <h3>Global transform</h3>
    <div class="row">
      <div>
        <label>Zoom (%)</label>
        <input id="scale" type="range" min="100" max="300" value="100">
        <span id="scaleVal">100</span>%
      </div>
      <div>
        <label>Rotation (deg)</label>
        <input id="rot" type="range" min="-180" max="180" value="0">
        <span id="rotVal">0</span>°
      </div>
    </div>
    <div class="row">
      <div>
        <label>Offset X (%)</label>
        <input id="tx" type="range" min="-50" max="50" value="0">
        <span id="txVal">0</span>%
      </div>
      <div>
        <label>Offset Y (%)</label>
        <input id="ty" type="range" min="-50" max="50" value="0">
        <span id="tyVal">0</span>%
      </div>
    </div>
  </div>
</div>

<script>
/* removed all "fit" references in parsing and applying */
</script>
</body>
</html>
